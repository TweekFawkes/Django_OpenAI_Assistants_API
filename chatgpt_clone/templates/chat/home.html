<!DOCTYPE html>
<html>
<head>
    <title>ChatGPT Clone</title>
</head>
<body>
    <div id="chat-container">
        Model:</br> <input type="text" id="model-name" value="gpt-4-turbo-preview" style="width: 500px;"></br>
        Assistant Name:</br> <input type="text" id="assistant-name" value="Cybersecurity Expert" style="width: 500px;"></br>
        Assistant Instructions:</br> <input type="text" id="assistant-instructions" value="You are an expert at Cybersecurity. Please Be Helpful." style="width: 500px;"></br>
        </br>
        <div id="chat-box"></div></br>
        </br>
        <input type="text" id="user-input" placeholder="Ask me anything..." style="width: 80%;">
        <button onclick="sendQuestion()">Send</button>
    </div>

    <script>
        function sendQuestion() {
            let modelName = document.getElementById('model-name').value;
            let userInput = document.getElementById('user-input').value;
            let assistantName = document.getElementById('assistant-name').value;
            let assistantInstructions = document.getElementById('assistant-instructions').value;
            fetch('/get-response/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                body: JSON.stringify({ modelName: modelName, userInput: userInput, assistantName: assistantName, assistantInstructions: assistantInstructions })
            })
            .then(response => response.json())
            .then(data => {
                let chatBox = document.getElementById('chat-box');
                chatBox.innerHTML += `<div>User: <pre>${userInput}</pre></div>`;
                chatBox.innerHTML += `<div>Bot: <pre>${data.response}</pre></div>`;
            });
        }
    </script>
</body>
</html>
